---
title: KG2
subtitle: Kaplan-Meier Graphs by Treatment Arm
---

------------------------------------------------------------------------

::: panel-tabset
## Setup

The same setup as in [KG1](../graphs/kg01.qmd) is used.

```{r, message = FALSE}
library(tern)
library(dplyr)

adtte <- scda::synthetic_cdisc_data("rcd_2022_06_27")$adtte %>%
  df_explicit_na() %>%
  filter(PARAMCD == "OS") %>%
  mutate(is_event = CNSR == 0)

variables <- list(tte = "AVAL", is_event = "is_event", arm = "ARM")
```

## Standard Plot

We can produce the basic plot using the `g_km()` function from `tern`.

```{r}
g_km(
  df = adtte,
  variables = variables,
  annot_surv_med = FALSE
)
```

We can also choose to annotate the plot with the median survival time for each of the treatment arms using the `annot_surv_med = TRUE` option.

```{r}
g_km(
  df = adtte,
  variables = variables,
  annot_surv_med = TRUE
)
```

## Change Color and Line Type in Kaplan-Meier Plot by Treatment Arm (KG2A)

The line color and line type in the plot can be customized using the `col` and `lty` arguments of `g_km()`, respectively.
Note that the order of the levels of the treatment arm factor variable is matched with the order of the colors.

```{r}
g_km(
  df = adtte,
  variables = variables,
  annot_surv_med = TRUE,
  col = c("purple", "orange", "red"),
  lty = 5
)
```

{{< include ../session_info.qmd >}}
:::
